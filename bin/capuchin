#!/usr/bin/env ruby
require 'capuchin'
require 'capuchin/shell'

require 'commander/import'

program :name, 'capuchin'
program :version, Capuchin::VERSION
program :description, 'Capuchin is a tool for writing email newsletters with Markdown'


CONFIG_FILE = "_config.yml"

options = {}

if File.exists?(CONFIG_FILE)
  options.merge YAML.load_file(CONFIG_FILE)
end

shell = Capuchin::Shell.new(options)

command :ping do |c|
  c.action do |args, options|
    shell.ping
  end
end

command :build do |c|
  c.action do |args, options|
    shell.build
  end
end